{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\quizbm\\\\quizbm-frontend\\\\src\\\\pages\\\\PlayQuizPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport quizService from '../services/quiz';\nimport LoadingSpinner from '../components/common/LoadingSpinner';\nimport QuizPlayer from '../components/quiz/QuizPlayer';\nimport Leaderboard from '../components/quiz/Leaderboard';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PlayQuizPage = () => {\n  _s();\n  const {\n    slug\n  } = useParams();\n  const [quiz, setQuiz] = useState(null);\n  const [gameState, setGameState] = useState('intro'); // intro, playing, finished\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [pin, setPin] = useState('');\n  const [isPinVerified, setIsPinVerified] = useState(false);\n  const [score, setScore] = useState(null);\n  useEffect(() => {\n    const fetchQuiz = async () => {\n      try {\n        setLoading(true);\n        const response = await quizService.getPublicQuiz(slug);\n        setQuiz({\n          ...response.data\n        });\n        if (!response.data.has_pin) {\n          setIsPinVerified(true);\n        }\n      } catch (err) {\n        setError('Quiz not found or failed to load.');\n        console.error(err);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchQuiz();\n  }, [slug]);\n  const handlePinSubmit = async e => {\n    e.preventDefault();\n    try {\n      await quizService.verifyPin(quiz.id, pin);\n      setIsPinVerified(true);\n    } catch (err) {\n      setError('Invalid PIN.');\n    }\n  };\n  const handleStartQuiz = () => {\n    setGameState('playing');\n  };\n  const handleFinishQuiz = finalScore => {\n    setScore(finalScore);\n    setGameState('finished');\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(LoadingSpinner, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 25\n  }, this);\n  if (error && !quiz) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"text-red-500 text-center p-8\",\n    children: error\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 32\n  }, this);\n  if (!isPinVerified) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container mx-auto p-4 text-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-2xl font-bold mb-4\",\n        children: quiz.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mb-4\",\n        children: quiz.description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handlePinSubmit,\n        className: \"max-w-sm mx-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          value: pin,\n          onChange: e => setPin(e.target.value),\n          placeholder: \"Enter PIN\",\n          className: \"w-full px-3 py-2 border rounded-md\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"mt-4 bg-blue-500 text-white py-2 px-4 rounded\",\n          children: \"Enter Quiz\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 21\n        }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-red-500 mt-2\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 31\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mx-auto p-4\",\n    children: [gameState === 'intro' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-3xl font-bold mb-2\",\n        children: quiz.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-lg text-gray-600 mb-6\",\n        children: quiz.description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleStartQuiz,\n        className: \"bg-green-500 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-lg text-xl\",\n        children: \"Start Quiz\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 17\n    }, this), gameState === 'playing' && /*#__PURE__*/_jsxDEV(QuizPlayer, {\n      quiz: quiz,\n      onFinish: handleFinishQuiz\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 17\n    }, this), gameState === 'finished' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-3xl font-bold mb-2\",\n        children: \"Quiz Finished!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-2xl mb-6\",\n        children: [\"Your score: \", score, \"%\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-md mx-auto\",\n        children: /*#__PURE__*/_jsxDEV(Leaderboard, {\n          quiz: quiz\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 9\n  }, this);\n};\n_s(PlayQuizPage, \"OmAlazEK3J0VczERXXYansD/zXY=\", false, function () {\n  return [useParams];\n});\n_c = PlayQuizPage;\nexport default PlayQuizPage;\nvar _c;\n$RefreshReg$(_c, \"PlayQuizPage\");","map":{"version":3,"names":["React","useState","useEffect","useParams","quizService","LoadingSpinner","QuizPlayer","Leaderboard","jsxDEV","_jsxDEV","PlayQuizPage","_s","slug","quiz","setQuiz","gameState","setGameState","loading","setLoading","error","setError","pin","setPin","isPinVerified","setIsPinVerified","score","setScore","fetchQuiz","response","getPublicQuiz","data","has_pin","err","console","handlePinSubmit","e","preventDefault","verifyPin","id","handleStartQuiz","handleFinishQuiz","finalScore","fileName","_jsxFileName","lineNumber","columnNumber","className","children","title","description","onSubmit","type","value","onChange","target","placeholder","onClick","onFinish","_c","$RefreshReg$"],"sources":["C:/xampp/htdocs/quizbm/quizbm-frontend/src/pages/PlayQuizPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport quizService from '../services/quiz';\r\nimport LoadingSpinner from '../components/common/LoadingSpinner';\r\nimport QuizPlayer from '../components/quiz/QuizPlayer';\r\nimport Leaderboard from '../components/quiz/Leaderboard';\r\n\r\nconst PlayQuizPage = () => {\r\n    const { slug } = useParams();\r\n    const [quiz, setQuiz] = useState(null);\r\n    const [gameState, setGameState] = useState('intro'); // intro, playing, finished\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n    const [pin, setPin] = useState('');\r\n    const [isPinVerified, setIsPinVerified] = useState(false);\r\n    const [score, setScore] = useState(null);\r\n\r\n    useEffect(() => {\r\n        const fetchQuiz = async () => {\r\n            try {\r\n                setLoading(true);\r\n                const response = await quizService.getPublicQuiz(slug);\r\n                setQuiz({ ...response.data });\r\n                if (!response.data.has_pin) {\r\n                    setIsPinVerified(true);\r\n                }\r\n            } catch (err) {\r\n                setError('Quiz not found or failed to load.');\r\n                console.error(err);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n        fetchQuiz();\r\n    }, [slug]);\r\n\r\n    const handlePinSubmit = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n            await quizService.verifyPin(quiz.id, pin);\r\n            setIsPinVerified(true);\r\n        } catch (err) {\r\n            setError('Invalid PIN.');\r\n        }\r\n    };\r\n    \r\n    const handleStartQuiz = () => {\r\n        setGameState('playing');\r\n    };\r\n\r\n    const handleFinishQuiz = (finalScore) => {\r\n        setScore(finalScore);\r\n        setGameState('finished');\r\n    };\r\n\r\n    if (loading) return <LoadingSpinner />;\r\n    if (error && !quiz) return <div className=\"text-red-500 text-center p-8\">{error}</div>;\r\n\r\n    if (!isPinVerified) {\r\n        return (\r\n            <div className=\"container mx-auto p-4 text-center\">\r\n                <h1 className=\"text-2xl font-bold mb-4\">{quiz.title}</h1>\r\n                <p className=\"mb-4\">{quiz.description}</p>\r\n                <form onSubmit={handlePinSubmit} className=\"max-w-sm mx-auto\">\r\n                    <input\r\n                        type=\"password\"\r\n                        value={pin}\r\n                        onChange={(e) => setPin(e.target.value)}\r\n                        placeholder=\"Enter PIN\"\r\n                        className=\"w-full px-3 py-2 border rounded-md\"\r\n                    />\r\n                    <button type=\"submit\" className=\"mt-4 bg-blue-500 text-white py-2 px-4 rounded\">\r\n                        Enter Quiz\r\n                    </button>\r\n                    {error && <p className=\"text-red-500 mt-2\">{error}</p>}\r\n                </form>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"container mx-auto p-4\">\r\n            {gameState === 'intro' && (\r\n                <div className=\"text-center\">\r\n                    <h1 className=\"text-3xl font-bold mb-2\">{quiz.title}</h1>\r\n                    <p className=\"text-lg text-gray-600 mb-6\">{quiz.description}</p>\r\n                    <button onClick={handleStartQuiz} className=\"bg-green-500 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-lg text-xl\">\r\n                        Start Quiz\r\n                    </button>\r\n                </div>\r\n            )}\r\n            {gameState === 'playing' && (\r\n                <QuizPlayer quiz={quiz} onFinish={handleFinishQuiz} />\r\n            )}\r\n            {gameState === 'finished' && (\r\n                <div className=\"text-center\">\r\n                    <h1 className=\"text-3xl font-bold mb-2\">Quiz Finished!</h1>\r\n                    <p className=\"text-2xl mb-6\">Your score: {score}%</p>\r\n                    <div className=\"max-w-md mx-auto\">\r\n                        <Leaderboard quiz={quiz} />\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default PlayQuizPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}