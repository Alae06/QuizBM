{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import quizService from'../../services/quiz';import LoadingSpinner from'../common/LoadingSpinner';import QuestionForm from'./QuestionForm';import Modal from'../common/Modal';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const QuestionManager=_ref=>{let{quiz}=_ref;const[questions,setQuestions]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[isModalOpen,setIsModalOpen]=useState(false);const[editingQuestion,setEditingQuestion]=useState(null);const fetchQuestions=useCallback(async()=>{if(!quiz)return;try{setLoading(true);const response=await quizService.getQuestions(quiz.id);setQuestions(response.data);setError(null);}catch(err){setError('Failed to fetch questions.');console.error(err);}finally{setLoading(false);}},[quiz]);useEffect(()=>{fetchQuestions();},[fetchQuestions]);const handleOpenModal=function(){let question=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;setEditingQuestion(question);setIsModalOpen(true);};const handleCloseModal=()=>{setIsModalOpen(false);setEditingQuestion(null);};const handleSubmitForm=async questionData=>{try{if(editingQuestion){await quizService.updateQuestion(editingQuestion.id,{data:questionData});}else{await quizService.createQuestion(quiz.id,{data:questionData});}fetchQuestions();handleCloseModal();}catch(err){console.error('Failed to save question',err);alert('Failed to save question.');}};const handleDeleteQuestion=async questionId=>{if(window.confirm('Are you sure you want to delete this question?')){try{await quizService.deleteQuestion(questionId);fetchQuestions();}catch(err){console.error('Failed to delete question',err);alert('Failed to delete question.');}}};if(loading)return/*#__PURE__*/_jsx(LoadingSpinner,{});if(error)return/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500\",children:error});return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-8 shadow rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold\",children:\"Manage Questions\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleOpenModal(),className:\"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-3 rounded\",children:\"+ Add Question\"})]}),questions.length>0?/*#__PURE__*/_jsx(\"ul\",{children:questions.map((question,index)=>/*#__PURE__*/_jsxs(\"li\",{className:\"border-b last:border-b-0 py-3\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"font-semibold\",children:[index+1,\". \",question.question_text]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-2 mt-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleOpenModal(question),className:\"text-sm bg-yellow-500 hover:bg-yellow-700 text-white py-1 px-2 rounded\",children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteQuestion(question.id),className:\"text-sm bg-red-500 hover:bg-red-700 text-white py-1 px-2 rounded\",children:\"Delete\"})]})]},question.id))}):/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-gray-500\",children:\"No questions yet. Add one to get started!\"}),isModalOpen&&/*#__PURE__*/_jsxs(Modal,{onClose:handleCloseModal,children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-bold mb-4\",children:editingQuestion?'Edit Question':'Add New Question'}),/*#__PURE__*/_jsx(QuestionForm,{onSubmit:handleSubmitForm,onCancel:handleCloseModal,initialData:editingQuestion,isEditing:!!editingQuestion})]})]});};export default QuestionManager;","map":{"version":3,"names":["React","useState","useEffect","useCallback","quizService","LoadingSpinner","QuestionForm","Modal","jsx","_jsx","jsxs","_jsxs","QuestionManager","_ref","quiz","questions","setQuestions","loading","setLoading","error","setError","isModalOpen","setIsModalOpen","editingQuestion","setEditingQuestion","fetchQuestions","response","getQuestions","id","data","err","console","handleOpenModal","question","arguments","length","undefined","handleCloseModal","handleSubmitForm","questionData","updateQuestion","createQuestion","alert","handleDeleteQuestion","questionId","window","confirm","deleteQuestion","className","children","onClick","map","index","question_text","onClose","onSubmit","onCancel","initialData","isEditing"],"sources":["C:/xampp/htdocs/quizbm/quizbm-frontend/src/components/quiz/QuestionManager.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport quizService from '../../services/quiz';\r\nimport LoadingSpinner from '../common/LoadingSpinner';\r\nimport QuestionForm from './QuestionForm';\r\nimport Modal from '../common/Modal';\r\n\r\nconst QuestionManager = ({ quiz }) => {\r\n    const [questions, setQuestions] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n    const [isModalOpen, setIsModalOpen] = useState(false);\r\n    const [editingQuestion, setEditingQuestion] = useState(null);\r\n\r\n    const fetchQuestions = useCallback(async () => {\r\n        if (!quiz) return;\r\n        try {\r\n            setLoading(true);\r\n            const response = await quizService.getQuestions(quiz.id);\r\n            setQuestions(response.data);\r\n            setError(null);\r\n        } catch (err) {\r\n            setError('Failed to fetch questions.');\r\n            console.error(err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [quiz]);\r\n\r\n    useEffect(() => {\r\n        fetchQuestions();\r\n    }, [fetchQuestions]);\r\n\r\n    const handleOpenModal = (question = null) => {\r\n        setEditingQuestion(question);\r\n        setIsModalOpen(true);\r\n    };\r\n\r\n    const handleCloseModal = () => {\r\n        setIsModalOpen(false);\r\n        setEditingQuestion(null);\r\n    };\r\n\r\n    const handleSubmitForm = async (questionData) => {\r\n        try {\r\n            if (editingQuestion) {\r\n                await quizService.updateQuestion(editingQuestion.id, {data: questionData});\r\n            } else {\r\n                await quizService.createQuestion(quiz.id, {data: questionData});\r\n            }\r\n            fetchQuestions();\r\n            handleCloseModal();\r\n        } catch (err) {\r\n            console.error('Failed to save question', err);\r\n            alert('Failed to save question.');\r\n        }\r\n    };\r\n\r\n    const handleDeleteQuestion = async (questionId) => {\r\n        if (window.confirm('Are you sure you want to delete this question?')) {\r\n            try {\r\n                await quizService.deleteQuestion(questionId);\r\n                fetchQuestions();\r\n            } catch (err) {\r\n                console.error('Failed to delete question', err);\r\n                alert('Failed to delete question.');\r\n            }\r\n        }\r\n    };\r\n\r\n    if (loading) return <LoadingSpinner />;\r\n    if (error) return <div className=\"text-red-500\">{error}</div>;\r\n\r\n    return (\r\n        <div className=\"bg-white p-8 shadow rounded-lg\">\r\n            <div className=\"flex justify-between items-center mb-4\">\r\n                <h2 className=\"text-xl font-semibold\">Manage Questions</h2>\r\n                <button onClick={() => handleOpenModal()} className=\"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-3 rounded\">\r\n                    + Add Question\r\n                </button>\r\n            </div>\r\n            {questions.length > 0 ? (\r\n                <ul>\r\n                    {questions.map((question, index) => (\r\n                        <li key={question.id} className=\"border-b last:border-b-0 py-3\">\r\n                            <p className=\"font-semibold\">{index + 1}. {question.question_text}</p>\r\n                            <div className=\"flex justify-end space-x-2 mt-2\">\r\n                                <button onClick={() => handleOpenModal(question)} className=\"text-sm bg-yellow-500 hover:bg-yellow-700 text-white py-1 px-2 rounded\">Edit</button>\r\n                                <button onClick={() => handleDeleteQuestion(question.id)} className=\"text-sm bg-red-500 hover:bg-red-700 text-white py-1 px-2 rounded\">Delete</button>\r\n                            </div>\r\n                        </li>\r\n                    ))}\r\n                </ul>\r\n            ) : (\r\n                <p className=\"text-center text-gray-500\">No questions yet. Add one to get started!</p>\r\n            )}\r\n\r\n            {isModalOpen && (\r\n                <Modal onClose={handleCloseModal}>\r\n                    <h3 className=\"text-lg font-bold mb-4\">{editingQuestion ? 'Edit Question' : 'Add New Question'}</h3>\r\n                    <QuestionForm\r\n                        onSubmit={handleSubmitForm}\r\n                        onCancel={handleCloseModal}\r\n                        initialData={editingQuestion}\r\n                        isEditing={!!editingQuestion}\r\n                    />\r\n                </Modal>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default QuestionManager; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}